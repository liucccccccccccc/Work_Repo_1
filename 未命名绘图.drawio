<mxfile host="app.diagrams.net" modified="2022-04-04T14:52:24.921Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.60 Safari/537.36" etag="yTlJkYmG_TM5asTq_1mB" version="17.4.0" type="github">
  <diagram id="B09sw1SsMUYjTHlAmRYq" name="第 1 页">
    <mxGraphModel dx="3131" dy="623" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="N2syd4eXTpZnAMuXH_85-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="N2syd4eXTpZnAMuXH_85-1" target="N2syd4eXTpZnAMuXH_85-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-850" y="1170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-1" value="planning_task.hpp" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-1040" y="1130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="N2syd4eXTpZnAMuXH_85-3" target="N2syd4eXTpZnAMuXH_85-5" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-720" y="120" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-3" value="on_running()" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-780" y="1130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-5" target="N2syd4eXTpZnAMuXH_85-7" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-5" value="检查tick" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-410" y="90" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-7" target="N2syd4eXTpZnAMuXH_85-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-7" value="planning_reset_received():&lt;br&gt;检查planning reset请求" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-425" y="240" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-12" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-9" target="N2syd4eXTpZnAMuXH_85-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-9" value="prediction_result_receiver_()：&lt;br&gt;检查预测结果请求" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-432.5" y="340" width="165" height="70" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-11" target="N2syd4eXTpZnAMuXH_85-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-11" value="prediction_result_receiver_()：&lt;br&gt;检查预测结果请求" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-432.5" y="450" width="165" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-18" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-15" target="N2syd4eXTpZnAMuXH_85-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-15" value="planning_control_cmd_request_receiver_()：&lt;br&gt;fetch newest and clear" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-480" y="560" width="260" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-17" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-350" y="830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-17" value="module_control_cmd_request_.module_control_cmd.value == PAUSE：&lt;br&gt;清除所有信息；&lt;br&gt;rest;&lt;br&gt;return;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="670" width="340" height="110" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-20" target="N2syd4eXTpZnAMuXH_85-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-20" value="&lt;br&gt;maf_system_manager::RunningModeEnum == HIGHWAY&lt;br&gt;mode.value == HIGHWAY;&lt;br&gt;设置monitor的模式&lt;br&gt;&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="830" width="350" height="100" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-21" target="N2syd4eXTpZnAMuXH_85-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-2" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="N2syd4eXTpZnAMuXH_85-21" target="6VtnmsEJRFgrmnHladI6-1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="170" y="1040" />
              <mxPoint x="170" y="230" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-21" value="succeed = run_once();&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="990" width="350" height="100" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-26" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-23" target="N2syd4eXTpZnAMuXH_85-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-27" value="Y" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="N2syd4eXTpZnAMuXH_85-26" vertex="1" connectable="0">
          <mxGeometry x="-0.2417" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-23" value="nullptr != planning_output_callback_ &amp;amp;&amp;amp; succeed():&lt;br&gt;如果planning_output_callback_ 不为空，以及run_once成功；&lt;br&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="1170" width="350" height="100" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-29" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-25" target="N2syd4eXTpZnAMuXH_85-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-25" value="world_model_-&amp;gt;is_on_route()&amp;nbsp; 检查是否on_route()：若是&lt;br&gt;&lt;div&gt;planning_output_callback_({tick_count, succeed}, generate_planning_output(),&lt;/div&gt;&lt;div&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; planning_status.trigger_msg_id);&lt;/div&gt;&lt;div&gt;调用generate_planning_output()函数，赋值planning_output_callbcak_&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-520" y="1350" width="350" height="100" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-31" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="N2syd4eXTpZnAMuXH_85-28" target="N2syd4eXTpZnAMuXH_85-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-28" value="如果存在planning_info_callback_ ,则运行planning_info_callback_(generate_planning_info(tick_count))" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-509.37" y="1520" width="328.75" height="60" as="geometry" />
        </mxCell>
        <mxCell id="N2syd4eXTpZnAMuXH_85-30" value="如果mdebug_callback_！=nullptr ,则运行：&lt;br&gt;mdebug_callback_();&lt;br&gt;dump_mdebug_log_string();&lt;br&gt;mdebug_callback_(MdebugContext::Instance()-&amp;gt;dump_mdebug_log_string())" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-508.75" y="1650" width="328.75" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-1" target="6VtnmsEJRFgrmnHladI6-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-1" value="保存上一次的pre_planning_结果" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="310" y="200" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-3" target="6VtnmsEJRFgrmnHladI6-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="560" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-3" value="update_world_model(current_time)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="265" y="340" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-6" target="6VtnmsEJRFgrmnHladI6-7">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-6" value="update_fusion_object_info():&lt;br&gt;&amp;nbsp;ddp::DdpContext::Instance()-&amp;gt;fusion_object_manager()；&lt;br&gt;从ddp::DdpContext中获取fusion_object_manager信息；&lt;br&gt;记录last_time 为current time" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1170" y="170" width="210" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-7" target="6VtnmsEJRFgrmnHladI6-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-7" value="当planning_request_receiver_不为空时，获取新的请求信息，" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1160" y="300" width="230" height="115" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-16" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-9" target="6VtnmsEJRFgrmnHladI6-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-9" value="update_vehicle_status：&lt;br&gt;更新chassis&amp;nbsp;&lt;br&gt;wheel&amp;nbsp;&lt;br&gt;body&lt;br&gt;ego_pose;&lt;br&gt;world_model_-&amp;gt;feed_vehicle_status(vehicle_status_);" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="470" width="330" height="120" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-11" target="6VtnmsEJRFgrmnHladI6-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-11" value="update_worldmodel_info():&lt;br&gt;如果离线地图则：&lt;br&gt;world_model_-&amp;gt;feed_horizon(horizon-&amp;gt;horizon_data.map_offline.data);//&lt;br&gt;更新ground_line信息；&lt;br&gt;parking_space信息" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1120" y="650" width="310" height="90" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="6VtnmsEJRFgrmnHladI6-13" target="6VtnmsEJRFgrmnHladI6-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="6VtnmsEJRFgrmnHladI6-13" value="update_prediction_info():&lt;br&gt;更新预测信息，prediction_info，将ddp_info传入world_model_中更新" style="whiteSpace=wrap;html=1;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="1110" y="790" width="330" height="55" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
